function Editor(bus,filesaver){
    var self = this;
    var currentDocument;
  
    this.selectDocument = function(path) {
        self.documents.forEach(function (d) { 
                d.selected = d.path == path;
                if(d.selected){
                    currentDocument = d;
                }
            });
    }
    
    this.hasFileOpened = function(path){
        return self.documents.some(function (d) { return d.path === path });
    }
    
    this.addDocument = function(doc){
        self.documents.push(doc);
    }

    bus("SaveCurrentDocument").subscribe(function(doc){
        filesaver(doc.path,doc.content);
        doc.modified = false;
    });
    
    bus("CurrentDocumentModified").subscribe(function(){
        currentDocument.modified = true;
    });
   
    this.documents = [];
}

module.exports = Editor;